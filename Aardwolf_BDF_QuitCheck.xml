<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Monday, October 10, 2022, 12:21 AM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "QuitCheck" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Aardwolf_BDF_QuitCheck"
   author="Crowley_For_Kerith"
   id="555fadc8211afa7c725ed507"
   language="Lua"
   purpose="bag nosave items"
   save_state="y"
   date_written="2022-10-10 00:20:06"
   requires="5.07"
   version="1.0"
   >

</plugin>


<!--  Triggers  -->

<triggers>
  <trigger
   group="QuitCheck"
   match="{/quit}"
   name="quitEnd"
   send_to="12"
   sequence="100"
  >
  <send>Send("home") -- change this to wherever home is
EnableTrigger("quitCheck", false)
EnableTrigger("quitEnd", false)
Send("keyring get all")
for _,v in ipairs(quitTable) do
    Send("put " .. v .. " container") --change container to your bag
end

Send("keyring put all")
Send("quit check")
</send>
  </trigger>
  <trigger
   group="QuitCheck"
   match="^\[.*\] .*- (\d+)\s+.*$"
   name="quitCheck"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>table.insert(quitTable, "%1")</send>
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
	<!-- Quit Check-->
  <alias
	   match="^quitchk$"
	   enabled="y"
	   group="QuitCheck"
	   regexp="y"
	   send_to="12"
	   sequence="100"
	  >
	  <send>
		  quitTable = {}
		  EnableTrigger("quitCheck")
		  EnableTrigger("quitEnd")
		  Send("invmon on")
		  Send("quit check")
		  Send("echo {/quit}")
	  </send>
  </alias>
   <alias
		name="quitcheck"
		match="qc"
		enabled="y"
		group="script"
		send_to="12"
		sequence="100"
>
		<send>
			quitcheckTable = {}&#9;-- creates table
			Send("keyring get all")
			Execute ("Quit check")
			Execute ("invmon on")
			for _,v in ipairs(quitcheckTable)
			  do Send("put " .. v .. " container")
			end
			Send("keyring put all")
		</send>
	</alias>

</aliases>

